{% extends 'zooventory/base.html' %}

{% block content %}
<div class="container mt-4">

    <h2>Search Animal API</h2>

    <form method="POST" class="d-flex mb-4">
        {% csrf_token %}
        <input type="text" class="form-control me-2" name="query"
               value="{{ query }}" placeholder="Search for animals...">
        <button class="btn btn-primary">Search</button>
    </form>

    {% if results %}
        <h4>Search Results</h4>
        <ul class="list-group mb-4">

            {% for animal in results|slice:":10" %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <div>
                        <strong>{{ animal.name }}</strong><br>
                        <small>{{ animal.taxonomy.scientific_name }}</small>
                    </div>

                    <form action="{% url 'uniqueanimal_create_api' %}" method="POST">
                        {% csrf_token %}
                        <input type="hidden" name="name"                       value="{{ animal.name }}">
                        <input type="hidden" name="scientific_name"            value="{{ animal.taxonomy.scientific_name }}">
                        <input type="hidden" name="kingdom"                    value="{{ animal.taxonomy.kingdom }}">
                        <input type="hidden" name="phylum"                     value="{{ animal.taxonomy.phylum }}">
                        <input type="hidden" name="animal_class"               value="{{ animal.taxonomy.class }}">
                        <input type="hidden" name="order"                      value="{{ animal.taxonomy.order }}">
                        <input type="hidden" name="family"                     value="{{ animal.taxonomy.family }}">
                        <input type="hidden" name="genus"                      value="{{ animal.taxonomy.genus }}">
                        <input type="hidden" name="prey"                       value="{{ animal.characteristics.prey }}">
                        <input type="hidden" name="name_of_young"              value="{{ animal.characteristics.name_of_young }}">
                        <input type="hidden" name="group_behavior"             value="{{ animal.characteristics.group_behavior }}">
                        <input type="hidden" name="estimated_population_size"  value="{{ animal.characteristics.estimated_population_size }}">
                        <input type="hidden" name="biggest_threat"             value="{{ animal.characteristics.biggest_threat }}">
                        <input type="hidden" name="most_distinctive_feature"   value="{{ animal.characteristics.most_distinctive_feature }}">
                        <input type="hidden" name="gestation_period"           value="{{ animal.characteristics.gestation_period }}">
                        <input type="hidden" name="habitat"                    value="{{ animal.characteristics.habitat }}">
                        <input type="hidden" name="diet"                       value="{{ animal.characteristics.diet }}">
                        <input type="hidden" name="average_litter_size"        value="{{ animal.characteristics.average_litter_size }}">
                        <input type="hidden" name="lifestyle"                  value="{{ animal.characteristics.lifestyle }}">
                        <input type="hidden" name="common_name"                value="{{ animal.characteristics.common_name }}">
                        <input type="hidden" name="number_of_species"          value="{{ animal.characteristics.number_of_species }}">
                        <input type="hidden" name="slogan"                     value="{{ animal.characteristics.slogan }}">
                        <input type="hidden" name="color"                      value="{{ animal.characteristics.color }}">
                        <input type="hidden" name="skin_type"                  value="{{ animal.characteristics.skin_type }}">
                        <input type="hidden" name="top_speed"                  value="{{ animal.characteristics.top_speed }}">

                        <button class="btn btn-success btn-sm">Add</button>
                    </form>
                </li>
            {% endfor %}

        </ul>
    {% endif %}

    <a href="{% url 'uniqueanimal_create' %}" class="btn btn-secondary">
        Create New Animal
    </a>

</div>
{% endblock %}

